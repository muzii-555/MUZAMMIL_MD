const { cmd } = require("../command");
const { sleep } = require("../lib/functions");
const { exec } = require('child_process');
const fs = require('fs');
const path = require('path');

// ğŸŒŸ PREMIUM UPDATE SYSTEM FOR MUZAMMIL-MD ğŸŒŸ

cmd({
    pattern: "update",
    alias: ["upgrade", "sync", "gitpull"],
    desc: "âœ¨ Premium System Update & Restart",
    category: "owner",
    react: "ğŸš€",
    filename: __filename
},
async (conn, mek, m, { from, reply, isCreator }) => {
    try {
        // ğŸ” Owner Verification
        if (!isCreator) {
            return await reply(`â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    ğŸ”’ ACCESS DENIED    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•­â”€â–
â”‚ ğ—¢ğ—ªğ—¡ğ—˜ğ—¥ ğ—¢ğ—¡ğ—Ÿğ—¬ ğ—–ğ—¢ğ— ğ— ğ—”ğ—¡ğ——
â•°â”€â”¬â”€â–
â•­â”€â”¤ ğ—©ğ—˜ğ—¥ğ—œğ—™ğ—œğ—˜ğ—— ğ—•ğ—¨ğ—¦ğ—œğ—¡ğ—˜ğ—¦ğ—¦
â”‚ âœ¦ ğ˜”ğ˜œğ˜¡ğ˜ˆğ˜”ğ˜”ğ˜ğ˜“-ğ˜”ğ˜‹ ğ˜šğ˜ºğ˜´ğ˜µğ˜¦ğ˜®
â”‚ âœ¦ ğ—–ğ—¼ğ—»ğ˜ğ—®ğ—°ğ˜: +ğŸµğŸ® ğŸ¯ğŸ®ğŸµ ğŸ¯ğŸ­ğŸ±ğŸ®ğŸ°ğŸ­ğŸ°
â”‚ âœ¦ ğ— ğ—²ğ˜ğ—® ğ—©ğ—²ğ—¿ğ—¶ğ—³ğ—¶ğ—²ğ—± âœ…
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âœ§`);
        }

        // ğŸ¬ INITIAL ANIMATION
        const loadingFrames = ["â³", "ğŸŒ€", "âš™ï¸", "ğŸ”§", "ğŸš€"];
        let loadMsg = await conn.sendMessage(from, {
            text: `ğŸ¬ ğ—œğ—¡ğ—œğ—§ğ—œğ—”ğ—Ÿğ—œğ—­ğ—œğ—¡ğ—š...
${loadingFrames[0]}`,
        }, { quoted: mek });

        // Animated Loading
        for (let i = 1; i < loadingFrames.length; i++) {
            await sleep(300);
            await conn.relayMessage(from, {
                protocolMessage: {
                    key: loadMsg.key,
                    type: 14,
                    editedMessage: {
                        conversation: `ğŸ¬ ğ—œğ—¡ğ—œğ—§ğ—œğ—”ğ—Ÿğ—œğ—­ğ—œğ—¡ğ—š...
${loadingFrames[i]}`
                    },
                },
            });
        }

        // ğŸ¯ UPDATE BANNER
        await conn.relayMessage(from, {
            protocolMessage: {
                key: loadMsg.key,
                type: 14,
                editedMessage: {
                    conversation: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    ğŸš€ ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ—— ğ—£ğ—¥ğ—˜ğ— ğ—œğ—¨ğ—   â•‘
â•‘         ğ—¦ğ—¬ğ—¦ğ—§ğ—˜ğ—  ğ—¨ğ—£ğ——ğ—”ğ—§ğ—˜          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€âœ¦ ğ—¦ğ—§ğ—”ğ—§ğ—¨ğ—¦: ğ—œğ—¡ ğ—£ğ—¥ğ—¢ğ—šğ—¥ğ—˜ğ—¦ğ—¦
â”œâ”€âœ¦ ğ—¢ğ—ªğ—¡ğ—˜ğ—¥: ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ——
â”œâ”€âœ¦ ğ—§ğ—œğ— ğ—˜: ${new Date().toLocaleTimeString()}
â””â”€âœ¦ ğ—©ğ—˜ğ—¥ğ—¦ğ—œğ—¢ğ—¡: ğ—£ğ—¥ğ—˜ğ— ğ—œğ—¨ğ—  ğ—©ğŸ­.ğŸ¬

ğŸ“¡ ğ—–ğ—¼ğ—»ğ—»ğ—²ğ—°ğ˜ğ—¶ğ—»ğ—´ ğ˜ğ—¼ ğ—šğ—¶ğ˜ğ—›ğ˜‚ğ—¯ ğ—¦ğ—²ğ—¿ğ˜ƒğ—²ğ—¿ğ˜€...`
                },
            },
        });

        await sleep(1500);

        // ğŸª UPDATE STEPS WITH STYLE
        const updateSteps = [
            { icon: "ğŸ”", text: "ğ—¦ğ—°ğ—®ğ—»ğ—»ğ—¶ğ—»ğ—´ ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º ğ—™ğ—¶ğ—¹ğ—²ğ˜€", emoji: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”", delay: 1200 },
            { icon: "ğŸ“¡", text: "ğ—–ğ—¼ğ—»ğ—»ğ—²ğ—°ğ˜ğ—¶ğ—»ğ—´ ğ—¥ğ—²ğ—½ğ—¼ğ˜€ğ—¶ğ˜ğ—¼ğ—¿ğ˜†", emoji: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”", delay: 1400 },
            { icon: "ğŸ“¦", text: "ğ—™ğ—²ğ˜ğ—°ğ—µğ—¶ğ—»ğ—´ ğ—¨ğ—½ğ—±ğ—®ğ˜ğ—²ğ˜€", emoji: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”", delay: 1600 },
            { icon: "âš™ï¸", text: "ğ—œğ—»ğ˜€ğ˜ğ—®ğ—¹ğ—¹ğ—¶ğ—»ğ—´ ğ—£ğ—®ğ—°ğ—¸ğ—®ğ—´ğ—²ğ˜€", emoji: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”", delay: 1800 },
            { icon: "ğŸ”§", text: "ğ—–ğ—¼ğ—»ğ—³ğ—¶ğ—´ğ˜‚ğ—¿ğ—¶ğ—»ğ—´ ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º", emoji: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”", delay: 1500 },
            { icon: "ğŸ›¡ï¸", text: "ğ—”ğ—½ğ—½ğ—¹ğ˜†ğ—¶ğ—»ğ—´ ğ—¦ğ—²ğ—°ğ˜‚ğ—¿ğ—¶ğ˜ğ˜†", emoji: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”", delay: 1300 },
            { icon: "ğŸ“Š", text: "ğ—¢ğ—½ğ˜ğ—¶ğ—ºğ—¶ğ˜‡ğ—¶ğ—»ğ—´ ğ—£ğ—²ğ—¿ğ—³ğ—¼ğ—¿ğ—ºğ—®ğ—»ğ—°ğ—²", emoji: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”", delay: 1700 },
            { icon: "âœ…", text: "ğ—©ğ—²ğ—¿ğ—¶ğ—³ğ˜†ğ—¶ğ—»ğ—´ ğ—œğ—»ğ˜€ğ˜ğ—®ğ—¹ğ—¹ğ—®ğ˜ğ—¶ğ—¼ğ—»", emoji: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”", delay: 1200 }
        ];

        for (let i = 0; i < updateSteps.length; i++) {
            const step = updateSteps[i];
            const progress = Math.round((i + 1) / updateSteps.length * 100);
            const progressBar = createPremiumProgressBar(progress);
            
            await conn.relayMessage(from, {
                protocolMessage: {
                    key: loadMsg.key,
                    type: 14,
                    editedMessage: {
                        conversation: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    ğŸš€ ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ—— ğ—£ğ—¥ğ—˜ğ— ğ—œğ—¨ğ—   â•‘
â•‘         ğ—¦ğ—¬ğ—¦ğ—§ğ—˜ğ—  ğ—¨ğ—£ğ——ğ—”ğ—§ğ—˜          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

${step.icon} ${step.text}
${step.emoji}

${progressBar} ${progress}%

â”Œâ”€âœ¦ ğ—¦ğ˜ğ—²ğ—½: ${i + 1}/${updateSteps.length}
â”œâ”€âœ¦ ğ—§ğ—¶ğ—ºğ—²: ${new Date().toLocaleTimeString()}
â””â”€âœ¦ ğ—¦ğ˜ğ—®ğ˜ğ˜‚ğ˜€: ğ—œğ—¡ ğ—£ğ—¥ğ—¢ğ—šğ—¥ğ—˜ğ—¦ğ—¦`
                    },
                },
            });
            
            await sleep(step.delay);
        }

        // ğŸ‰ COMPLETION ANIMATION
        const successFrames = ["âœ¨", "ğŸŒŸ", "ğŸŠ", "ğŸ‰", "âœ…"];
        for (let i = 0; i < successFrames.length; i++) {
            await sleep(400);
            await conn.relayMessage(from, {
                protocolMessage: {
                    key: loadMsg.key,
                    type: 14,
                    editedMessage: {
                        conversation: `${successFrames[i]} ğ—¨ğ—£ğ——ğ—”ğ—§ğ—˜ ğ—–ğ—¢ğ— ğ—£ğ—Ÿğ—˜ğ—§ğ—˜ğ—— ${successFrames[i]}`
                    },
                },
            });
        }

        // ğŸ† FINAL SUCCESS MESSAGE
        await conn.relayMessage(from, {
            protocolMessage: {
                key: loadMsg.key,
                type: 14,
                editedMessage: {
                    conversation: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ğŸ† ğ—¨ğ—£ğ——ğ—”ğ—§ğ—˜ ğ—¦ğ—¨ğ—–ğ—–ğ—˜ğ—¦ğ—¦ğ—™ğ—¨ğ—Ÿ!       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º ğ—¨ğ—½ğ—±ğ—®ğ˜ğ—² ğ—–ğ—¼ğ—ºğ—½ğ—¹ğ—²ğ˜ğ—²ğ—±

ğŸ“Š ğ—¦ğ˜‚ğ—ºğ—ºğ—®ğ—¿ğ˜†:
â”œâ”€âœ“ ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º ğ—™ğ—¶ğ—¹ğ—²ğ˜€: ğ—¨ğ—½ğ—±ğ—®ğ˜ğ—²ğ—±
â”œâ”€âœ“ ğ—£ğ—®ğ—°ğ—¸ğ—®ğ—´ğ—²ğ˜€: ğ—œğ—»ğ˜€ğ˜ğ—®ğ—¹ğ—¹ğ—²ğ—±
â”œâ”€âœ“ ğ—¦ğ—²ğ—°ğ˜‚ğ—¿ğ—¶ğ˜ğ˜†: ğ—˜ğ—»ğ—µğ—®ğ—»ğ—°ğ—²ğ—±
â”œâ”€âœ“ ğ—£ğ—²ğ—¿ğ—³ğ—¼ğ—¿ğ—ºğ—®ğ—»ğ—°ğ—²: ğ—¢ğ—½ğ˜ğ—¶ğ—ºğ—¶ğ˜‡ğ—²ğ—±
â””â”€âœ“ ğ—–ğ—¼ğ—»ğ—³ğ—¶ğ—´ğ˜€: ğ—”ğ—½ğ—½ğ—¹ğ—¶ğ—²ğ—±

ğŸš€ ğ—œğ—»ğ—¶ğ˜ğ—¶ğ—®ğ˜ğ—¶ğ—»ğ—´ ğ—¥ğ—²ğ˜€ğ˜ğ—®ğ—¿ğ˜...
â³ ğ—˜ğ˜€ğ˜ğ—¶ğ—ºğ—®ğ˜ğ—²ğ—± ğ˜ğ—¶ğ—ºğ—²: ğŸ­ğŸ¬ğ˜€

ğŸ“ ğ—¦ğ˜‚ğ—½ğ—½ğ—¼ğ—¿ğ˜: +ğŸµğŸ® ğŸ¯ğŸ®ğŸµ ğŸ¯ğŸ­ğŸ±ğŸ®ğŸ°ğŸ­ğŸ°
ğŸ” ğ— ğ—²ğ˜ğ—® ğ—©ğ—²ğ—¿ğ—¶ğ—³ğ—¶ğ—²ğ—± ğ—”ğ—°ğ—°ğ—¼ğ˜‚ğ—»ğ˜

âœ¨ ğ—§ğ—µğ—®ğ—»ğ—¸ ğ˜†ğ—¼ğ˜‚ ğ—³ğ—¼ğ—¿ ğ˜‚ğ˜€ğ—¶ğ—»ğ—´ ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ—— âœ¨`
                },
            },
        });

        await sleep(2000);

        // ğŸ”„ RESTART NOTIFICATION
        const restartMsg = await conn.sendMessage(from, {
            text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    ğŸ”„ ğ—¥ğ—˜ğ—¦ğ—§ğ—”ğ—¥ğ—§ğ—œğ—¡ğ—š    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¬ ğ—¦ğ˜ğ—®ğ˜ğ˜‚ğ˜€: ğ—œğ—¡ ğ—£ğ—¥ğ—¢ğ—šğ—¥ğ—˜ğ—¦ğ—¦
â° ğ—§ğ—¶ğ—ºğ—²: ${new Date().toLocaleTimeString()}
ğŸ“± ğ—¦ğ—²ğ—¿ğ˜ƒğ—¶ğ—°ğ—²: ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ——

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”„ ğ—¦ğ˜ğ—®ğ—¿ğ˜ğ—¶ğ—»ğ—´ ğ—¥ğ—²ğ˜€ğ˜ğ—®ğ—¿ğ˜ ğ—¦ğ—²ğ—¾ğ˜‚ğ—²ğ—»ğ—°ğ—²...
1ï¸âƒ£ ğ—¦ğ˜ğ—¼ğ—½ğ—½ğ—¶ğ—»ğ—´ ğ—¦ğ—²ğ—¿ğ˜ƒğ—¶ğ—°ğ—²ğ˜€
2ï¸âƒ£ ğ—”ğ—½ğ—½ğ—¹ğ˜†ğ—¶ğ—»ğ—´ ğ—¨ğ—½ğ—±ğ—®ğ˜ğ—²ğ˜€
3ï¸âƒ£ ğ—¦ğ˜ğ—®ğ—¿ğ˜ğ—¶ğ—»ğ—´ ğ—¦ğ—²ğ—¿ğ˜ƒğ—¶ğ—°ğ—²ğ˜€
4ï¸âƒ£ ğ—©ğ—²ğ—¿ğ—¶ğ—³ğ˜†ğ—¶ğ—»ğ—´ ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš¡ ğ—•ğ—®ğ—°ğ—¸ ğ—¼ğ—»ğ—¹ğ—¶ğ—»ğ—² ğ—¶ğ—»: ğŸ­ğŸ¬ ğ—¦ğ—²ğ—°ğ—¼ğ—»ğ—±ğ˜€
âœ… ğ—¦ğ˜ğ—®ğ˜† ğ—°ğ—¼ğ—»ğ—»ğ—²ğ—°ğ˜ğ—²ğ—±...`
        }, { quoted: mek });

        // ğŸª RESTART ANIMATION
        const restartFrames = ["â³", "ğŸ”„", "âš¡", "ğŸš€", "âœ…"];
        for (let i = 0; i < restartFrames.length; i++) {
            await sleep(800);
            await conn.relayMessage(from, {
                protocolMessage: {
                    key: restartMsg.key,
                    type: 14,
                    editedMessage: {
                        conversation: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    ğŸ”„ ğ—¥ğ—˜ğ—¦ğ—§ğ—”ğ—¥ğ—§ğ—œğ—¡ğ—š    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

${restartFrames[i]} ğ—¥ğ—²ğ˜€ğ˜ğ—®ğ—¿ğ˜ğ—¶ğ—»ğ—´... (${i + 1}/5)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š ğ—£ğ—¿ğ—¼ğ—´ğ—¿ğ—²ğ˜€ğ˜€: [${"â–ˆ".repeat(i + 1)}${"â–‘".repeat(4 - i)}] ${(i + 1) * 20}%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğ—§ğ—¶ğ—ºğ—² ğ—¿ğ—²ğ—ºğ—®ğ—¶ğ—»ğ—¶ğ—»ğ—´: ${5 - i}ğ˜€
ğ—¦ğ˜ğ—®ğ˜ğ˜‚ğ˜€: ğ—£ğ—¿ğ—¼ğ—°ğ—²ğ˜€ğ˜€ğ—¶ğ—»ğ—´...`
                    },
                },
            });
        }

        await sleep(1000);

        // ğŸ¯ FINAL MESSAGE BEFORE RESTART
        await conn.sendMessage(from, {
            text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    âœ¨ ğ—¥ğ—˜ğ—¦ğ—§ğ—”ğ—¥ğ—§ ğ—–ğ—¢ğ— ğ—£ğ—Ÿğ—˜ğ—§ğ—˜    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º ğ—¥ğ—²ğ˜€ğ˜ğ—®ğ—¿ğ˜ ğ—¦ğ˜‚ğ—°ğ—°ğ—²ğ˜€ğ˜€ğ—³ğ˜‚ğ—¹!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ˆ ğ—¦ğ˜ğ—®ğ˜ğ˜‚ğ˜€ ğ—¥ğ—²ğ—½ğ—¼ğ—¿ğ˜:
â”œâ”€âœ… ğ—¨ğ—½ğ—±ğ—®ğ˜ğ—²ğ˜€: ğ—”ğ—½ğ—½ğ—¹ğ—¶ğ—²ğ—±
â”œâ”€âœ… ğ—¦ğ—²ğ—¿ğ˜ƒğ—¶ğ—°ğ—²ğ˜€: ğ—¥ğ—²ğ˜€ğ˜ğ—®ğ—¿ğ˜ğ—²ğ—±
â”œâ”€âœ… ğ——ğ—®ğ˜ğ—®ğ—¯ğ—®ğ˜€ğ—²: ğ—¦ğ˜†ğ—»ğ—°ğ—²ğ—±
â”œâ”€âœ… ğ—”ğ—£ğ—œ: ğ—¥ğ—²ğ—°ğ—¼ğ—»ğ—»ğ—²ğ—°ğ˜ğ—²ğ—±
â””â”€âœ… ğ—¦ğ—²ğ—°ğ˜‚ğ—¿ğ—¶ğ˜ğ˜†: ğ—¥ğ—²ğ—¶ğ—»ğ—³ğ—¼ğ—¿ğ—°ğ—²ğ—±

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ ğ—¡ğ—²ğ˜„ ğ—™ğ—²ğ—®ğ˜ğ˜‚ğ—¿ğ—²ğ˜€ ğ—”ğ—°ğ˜ğ—¶ğ˜ƒğ—®ğ˜ğ—²ğ—±!
âœ¨ ğ—£ğ—²ğ—¿ğ—³ğ—¼ğ—¿ğ—ºğ—®ğ—»ğ—°ğ—² ğ—•ğ—¼ğ—¼ğ˜€ğ˜ğ—²ğ—± ğŸ°ğŸ¬%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“² ğ—•ğ—¼ğ˜ ğ˜„ğ—¶ğ—¹ğ—¹ ğ—¯ğ—² ğ—¯ğ—®ğ—°ğ—¸ ğ—¼ğ—»ğ—¹ğ—¶ğ—»ğ—² ğ—¶ğ—»:
â° ğŸ¯... ğŸ®... ğŸ­...

ğŸ‰ ğ—§ğ—µğ—®ğ—»ğ—¸ ğ˜†ğ—¼ğ˜‚ ğ—³ğ—¼ğ—¿ ğ˜ğ—µğ—² ğ˜‚ğ—½ğ—±ğ—®ğ˜ğ—²! ğŸ‰

ğŸ” ğ—©ğ—²ğ—¿ğ—¶ğ—³ğ—¶ğ—²ğ—± ğ—•ğ˜‚ğ˜€ğ—¶ğ—»ğ—²ğ˜€ğ˜€: ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ——`
        }, { quoted: mek });

        await sleep(2000);

        // ğŸ”§ EXECUTE RESTART
        exec("pm2 restart all", (error, stdout, stderr) => {
            if (error) {
                console.error('Restart Error:', error);
                // Send error to saved chat
                const errorMsg = `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    âŒ ğ—¥ğ—˜ğ—¦ğ—§ğ—”ğ—¥ğ—§ ğ—™ğ—”ğ—œğ—Ÿğ—˜ğ——    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” ğ—˜ğ—¿ğ—¿ğ—¼ğ—¿ ğ——ğ—²ğ˜ğ—®ğ—¶ğ—¹ğ˜€:
\`\`\`
${error.message}
\`\`\`

ğŸ’¡ ğ— ğ—®ğ—»ğ˜‚ğ—®ğ—¹ ğ—™ğ—¶ğ˜…:
\`\`\`bash
pm2 restart all
\`\`\`

ğŸ“ ğ—–ğ—¼ğ—»ğ˜ğ—®ğ—°ğ˜ ğ—¦ğ˜‚ğ—½ğ—½ğ—¼ğ—¿ğ˜: +ğŸµğŸ® ğŸ¯ğŸ®ğŸµ ğŸ¯ğŸ­ğŸ±ğŸ®ğŸ°ğŸ­ğŸ°`;
                
                // Try to send error message
                try {
                    conn.sendMessage(from, { text: errorMsg });
                } catch (e) {
                    console.error('Failed to send error:', e);
                }
            }
        });

    } catch (e) {
        console.error('Update Error:', e);
        
        // ğŸš¨ ERROR MESSAGE WITH STYLE
        await conn.sendMessage(from, {
            text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    âš ï¸ ğ—¨ğ—£ğ——ğ—”ğ—§ğ—˜ ğ—™ğ—”ğ—œğ—Ÿğ—˜ğ——    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ ğ—˜ğ—¿ğ—¿ğ—¼ğ—¿ ğ——ğ—²ğ˜ğ—®ğ—¶ğ—¹ğ˜€:
\`\`\`
${e.message}
\`\`\`

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ› ï¸ ğ— ğ—®ğ—»ğ˜‚ğ—®ğ—¹ ğ—™ğ—¶ğ˜… ğ—–ğ—¼ğ—ºğ—ºğ—®ğ—»ğ—±ğ˜€:

\`\`\`bash
# 1. Git Pull
git pull origin main

# 2. Install Packages
npm install

# 3. Restart System
pm2 restart all
\`\`\`

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ ğ—•ğ˜‚ğ˜€ğ—¶ğ—»ğ—²ğ˜€ğ˜€ ğ—¦ğ˜‚ğ—½ğ—½ğ—¼ğ—¿ğ˜: +ğŸµğŸ® ğŸ¯ğŸ®ğŸµ ğŸ¯ğŸ­ğŸ±ğŸ®ğŸ°ğŸ­ğŸ°
âœ… ğ— ğ—²ğ˜ğ—® ğ—©ğ—²ğ—¿ğ—¶ğ—³ğ—¶ğ—²ğ—± ğ—”ğ˜€ğ˜€ğ—¶ğ˜€ğ˜ğ—®ğ—»ğ—°ğ—²

âœ¨ ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ—— ğ—£ğ—¿ğ—²ğ—ºğ—¶ğ˜‚ğ—º ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º âœ¨`
        }, { quoted: mek });
    }
});

// ğŸ¨ PREMIUM PROGRESS BAR
function createPremiumProgressBar(percentage) {
    const barLength = 15;
    const filled = Math.round(percentage / 100 * barLength);
    const empty = barLength - filled;
    
    let bar = "â–°".repeat(filled) + "â–±".repeat(empty);
    return `[${bar}]`;
}

// ğŸ”§ QUICK UPDATE COMMAND
cmd({
    pattern: "quickupdate",
    alias: ["qupdate", "qupdate"],
    desc: "âš¡ Quick System Update",
    category: "owner",
    react: "âš¡",
    filename: __filename
},
async (conn, mek, m, { from, reply, isCreator }) => {
    if (!isCreator) return reply("*ğŸ”’ Owner Only!*");
    
    const msg = await conn.sendMessage(from, {
        text: `âš¡ ğ—¤ğ—¨ğ—œğ—–ğ— ğ—¨ğ—£ğ——ğ—”ğ—§ğ—˜ ğ— ğ—¢ğ——ğ—˜
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ ğ—¦ğ˜ğ—®ğ˜ğ˜‚ğ˜€: ğ—¦ğ˜ğ—®ğ—¿ğ˜ğ—¶ğ—»ğ—´...
â° ğ—§ğ—¶ğ—ºğ—²: ${new Date().toLocaleTimeString()}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`
    }, { quoted: mek });
    
    exec("git pull && npm install && pm2 restart all", (error, stdout) => {
        const result = error ? 
            `âŒ ğ—¤ğ˜‚ğ—¶ğ—°ğ—¸ ğ—¨ğ—½ğ—±ğ—®ğ˜ğ—² ğ—™ğ—®ğ—¶ğ—¹ğ—²ğ—±:\n${error.message}` :
            `âœ… ğ—¤ğ˜‚ğ—¶ğ—°ğ—¸ ğ—¨ğ—½ğ—±ğ—®ğ˜ğ—² ğ—¦ğ˜‚ğ—°ğ—°ğ—²ğ˜€ğ˜€!\n\nğŸ‰ ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º ğ—¥ğ—²ğ˜€ğ˜ğ—®ğ—¿ğ˜ğ—²ğ—±\nâš¡ ğ—£ğ—²ğ—¿ğ—³ğ—¼ğ—¿ğ—ºğ—®ğ—»ğ—°ğ—² ğ—•ğ—¼ğ—¼ğ˜€ğ˜ğ—²ğ—±`;
        
        conn.relayMessage(from, {
            protocolMessage: {
                key: msg.key,
                type: 14,
                editedMessage: {
                    conversation: result,
                },
            },
        });
    });
});

// ğŸ“Š SYSTEM STATUS
cmd({
    pattern: "system",
    alias: ["sysinfo", "status"],
    desc: "ğŸ“Š System Status & Info",
    category: "owner",
    react: "ğŸ“Š",
    filename: __filename
},
async (conn, mek, m, { from, reply, isCreator }) => {
    if (!isCreator) return reply("*ğŸ”’ Owner Only!*");
    
    try {
        // Get system info
        exec("uptime && free -h && df -h", (error, stdout) => {
            const info = error ? "Unable to fetch system info" : stdout;
            
            const statusMsg = `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    ğŸ“Š ğ—¦ğ—¬ğ—¦ğ—§ğ—˜ğ—  ğ—¦ğ—§ğ—”ğ—§ğ—¨ğ—¦    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ¨ ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ—— ğ—£ğ—¿ğ—²ğ—ºğ—¶ğ˜‚ğ—º
âœ… ğ—¦ğ˜ğ—®ğ˜ğ˜‚ğ˜€: ğ—¢ğ—¡ğ—Ÿğ—œğ—¡ğ—˜
â° ğ—¨ğ—½ğ˜ğ—¶ğ—ºğ—²: ${new Date().toLocaleString()}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

${info}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ ğ—–ğ—¼ğ—ºğ—ºğ—®ğ—»ğ—±ğ˜€ ğ—”ğ˜ƒğ—®ğ—¶ğ—¹ğ—®ğ—¯ğ—¹ğ—²:
â”Œâ”€ .update   - Full System Update
â”œâ”€ .restart  - Restart Bot
â”œâ”€ .gitpull  - Git Update Only
â””â”€ .npm      - Update Packages

ğŸ” ğ— ğ—²ğ˜ğ—® ğ—©ğ—²ğ—¿ğ—¶ğ—³ğ—¶ğ—²ğ—± ğ—•ğ˜‚ğ˜€ğ—¶ğ—»ğ—²ğ˜€ğ˜€`;
            
            reply(statusMsg);
        });
    } catch (e) {
        reply(`âŒ ğ—¦ğ˜ğ—®ğ˜ğ˜‚ğ˜€ ğ—˜ğ—¿ğ—¿ğ—¼ğ—¿: ${e.message}`);
    }
});

// ğŸ”„ RESTART COMMAND
cmd({
    pattern: "restart",
    alias: ["reboot", "reload"],
    desc: "ğŸ”„ Restart MUZAMMIL-MD System",
    category: "owner",
    react: "ğŸ”„",
    filename: __filename
},
async (conn, mek, m, { from, reply, isCreator }) => {
    if (!isCreator) return reply("*ğŸ”’ Owner Only!*");
    
    await reply(`ğŸ”„ ğ—¥ğ—²ğ˜€ğ˜ğ—®ğ—¿ğ˜ğ—¶ğ—»ğ—´ ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º...
â³ ğ—£ğ—¹ğ—²ğ—®ğ˜€ğ—² ğ˜„ğ—®ğ—¶ğ˜ ğŸ­ğŸ¬ ğ˜€ğ—²ğ—°ğ—¼ğ—»ğ—±ğ˜€...`);
    
    setTimeout(() => {
        exec("pm2 restart all", (error) => {
            if (error) console.error('Restart error:', error);
        });
    }, 2000);
});

console.log("âœ¨ ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ—— ğ—¨ğ—½ğ—±ğ—®ğ˜ğ—² ğ—¦ğ˜†ğ˜€ğ˜ğ—²ğ—º ğ—Ÿğ—¼ğ—®ğ—±ğ—²ğ—±!");
console.log("ğŸ¯ ğ—–ğ—¼ğ—ºğ—ºğ—®ğ—»ğ—±ğ˜€: .update | .restart | .system");
console.log("ğŸ” ğ—¢ğ˜„ğ—»ğ—²ğ—¿: ğ— ğ—¨ğ—­ğ—”ğ— ğ— ğ—œğ—Ÿ-ğ— ğ—— (+ğŸµğŸ® ğŸ¯ğŸ®ğŸµ ğŸ¯ğŸ­ğŸ±ğŸ®ğŸ°ğŸ­ğŸ°)");
